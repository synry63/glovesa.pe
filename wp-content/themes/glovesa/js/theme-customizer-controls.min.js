!function(a){function b(a){a.somethingSelected()?a.indentSelection("add"):a.replaceSelection(a.getOption("indentWithTabs")?"	":Array(a.getOption("indentUnit")+1).join(" "),"end","+input")}function c(){clearTimeout(f),e.trigger("change")}function d(){var b=a("#customize-preview iframe").contents().find("#ref_customizer-css");b.length&&b.remove()}var e,f;a(window).load(function(){if(e=a("#textarea-custom-css"),e.length){e.hide();var g=CodeMirror.fromTextArea(document.getElementById("textarea-custom-css"),{mode:"css",lineNumbers:!0,lineWrapping:!0,extraKeys:{Tab:b}});a("#accordion-section-section_custom_css > ul.accordion-section-content").css({padding:"0"}),a("#accordion-section-section_custom_css ").on("click",function(){g.refresh(),a("#accordion-section-section_custom_css ").off("click")}),a("body").on("hover","#save",function(){c()}),g.on("change",function(){e.val(g.getValue()+" "),clearTimeout(f),f=setTimeout(c,1e3)}),e.val(g.getValue()+" "),f=setTimeout(c,1e3),setTimeout(d,3e3)}}),a(window).load(function(){function b(){g.css("height",g.height()-1+"px"),setTimeout(function(){a("#customize-preview").css("height","100%")},1e3),j.trigger("change")}function c(){if(j.is(":checked")){var b;b=1==p&&1==q?t:1==p?u:1==q?v:s,a("#customize-preview iframe").contents().find("#custom-ref-style-life").html(b)}}function e(){"no"!=f&&(r=0,i.trigger("change",["noColorRefresh"]),h.trigger("change"),d()),f="no",setTimeout(function(){f=1},1e3)}var f,g=a("#customize-preview"),h=a("#customize-control-ref_wc_styles input"),i=a("#customize-control-ref_theme_styles input"),j=a("#customize-control-ref_color_styles input"),k=a("#customize-control-ref_container_wrapper input"),l=a("#customize-control-ref_wc_styles, #customize-control-ref_theme_styles, #customize-control-ref_color_styles").find("input");k.on("change",function(){var b=a("#customize-preview iframe").contents(),c=b.find('section.container-main[role="main"]');k.is(":checked")?c.addClass("container"):c.removeClass("container"),g.css("height",g.height()-1+"px"),setTimeout(function(){a("#customize-preview").css("height","100%")},100)}),i.on("change",function(c,d){var e=a("#customize-preview iframe").contents(),f=e.find("#theme-css"),g=e.find("#bootstrap_css-css");i.is(":checked")?(f.length?f.attr("media","all"):e.find("#main-css").after('<link id="theme-css" type="text/css" rel="stylesheet" href="'+toolset.theme_css+'"></link>'),g.length&&g.attr("media","print")):(g.length?g.attr("media","all"):e.find("#main-css").after('<link id="bootstrap_css-css" type="text/css" rel="stylesheet" href="'+toolset.theme_css_bootstrap+'"></link>'),f.length&&f.attr("media","print")),"noColorRefresh"!=d&&b()}),h.on("change",function(){var c=a("#customize-preview iframe").contents(),d=c.find("#ref_woocommerce-css");h.is(":checked")?d.length?d.attr("media","all"):c.find("#theme-css").length?c.find("#theme-css").after('<link id="ref_woocommerce-css" type="text/css" rel="stylesheet" href="'+toolset.theme_css_woo+'"></link>'):c.find("#main-css").after('<link id="ref_woocommerce-css" type="text/css" rel="stylesheet" href="'+toolset.theme_css_woo+'"></link>'):d.length&&d.attr("media","print"),b()}),a('<div id="primary_color_control_overlay" />').appendTo("#customize-control-primary_color");var m=a("body"),n=a("#customize-control-primary_color .customize-control-content"),o=a("#primary_color_control_overlay");if(n.length&&!j.attr("disabled")){var p,q,r,s,t,u,v,w=n.find("input.wp-color-picker"),x=a("#primary_color_enabled"),y=a("#primary_color_disabled");w.on("change",function(){m.addClass("primary-color-change"),o.css({height:n.height()+"px","margin-top":-n.height()+"px"}),l.attr("disabled",!0),r=w.val(),a.ajax({url:toolset.ajaxurl,type:"POST",data:{action:"ref_dynamic_css",customize_ajax_ref_color_styles:r,customize_ajax_ref_theme_styles:p,customize_ajax_ref_wc_styles:q},dataType:"json",success:function(a){s=a.cacheCSS,u=a.cacheCSSTheme,v=a.cacheCSSWoo,t=a.cacheCSSThemeWoo,c(),m.removeClass("primary-color-change"),l.removeAttr("disabled")}})}),j.on("change",function(){j.is(":checked")?(n.show(),x.show(),y.hide(),p=i.is(":checked")?1:0,q=h.is(":checked")?1:0,r==w.val()?c():w.trigger("change")):(n.hide(),x.hide(),y.show(),a("#customize-preview iframe").contents().find("#custom-ref-style-life").html(""))}),j.trigger("change"),document.addEventListener("animationstart",e,!1),document.addEventListener("MSAnimationStart",e,!1),document.addEventListener("webkitAnimationStart",e,!1)}})}(jQuery);